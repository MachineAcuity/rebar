{"version":3,"sources":["../../../units/rb-base-server/serverHealthz.js"],"names":["serverHealthz","get","req","res","next","defaultPersister","confirmHealth","sendStatus","err","console","log","Error"],"mappings":";;AAEA;;AAEA,qH;;AAEA;;AAEA,MAAMA,aAAa,GAAG,uBAAtB;;AAEA;;AAEAA,aAAa,CAACC,GAAd,CAAkB,GAAlB,EAAuB,OAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;AAC/C,MAAI;AACF,UAAMC,0BAAiBC,aAAjB,EAAN;;AAEAH,IAAAA,GAAG,CAACI,UAAJ,CAAe,GAAf;AACD,GAJD,CAIE,OAAOC,GAAP,EAAY;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAY,EAAEF,GAAF,EAAZ;AACAJ,IAAAA,IAAI,CAAC,IAAIO,KAAJ,CAAU,mBAAV,CAAD,CAAJ;AACD;AACF,CATD,E;;AAWeX,a","sourcesContent":["// @flow\n\nimport express from 'express'\n\nimport defaultPersister from '../_configuration/rb-base-server/graphql/defaultPersister'\n\n//\n\nconst serverHealthz = express()\n\n//\n\nserverHealthz.get('/', async (req, res, next) => {\n  try {\n    await defaultPersister.confirmHealth()\n\n    res.sendStatus(200)\n  } catch (err) {\n    console.log({ err })\n    next(new Error('DB is unreachable'))\n  }\n})\n\nexport default serverHealthz\n"],"file":"serverHealthz.js"}