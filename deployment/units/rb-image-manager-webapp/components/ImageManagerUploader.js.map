{"version":3,"sources":["../../../../units/rb-image-manager-webapp/components/ImageManagerUploader.jsx"],"names":["styles","theme","buttonProperties","marginTop","spacing","marginBottom","dropZone","backgroundColor","border","width","height","currentImage","backgroundSize","backgroundRepeat","backgroundPosition","dzActive","opacity","dzReject","reGetFileNameExtension","extractFileNameAndExtension","fileNameFull","arrName","exec","fileNamePrototype","fileName","previousNonLetter","i","length","char","charAt","toUpperCase","Error","fileNameExtension","toLowerCase","ImageManagerUploader","React","Component","constructor","props","context","_handle_onDrop","filesDropped","alert","fileDropped","fileDroppedPreview","URL","createObjectURL","name","setState","_handle_onChangeFileName","event","target","value","_handle_onClickUpload","parameters","state","formData","FormData","append","parameterName","serverURL","xhr","XMLHttpRequest","open","setRequestHeader","onreadystatechange","readyState","status","_handle_onUploadSuccess","responseText","_handle_onUploadFailure","send","JSON","parse","onChange","err","releasePreview","_handle_onClickCalcelUpload","componentWillUnmount","revokeObjectURL","renderFilesDropped","classes","customizeFileName","label","renderFilesNotDropped","backgroundImage","Object","entries","map","paramKey","paramValue","encodeURIComponent","join","console","log","XXX","getRootProps","getInputProps","className","style","textAlign","render"],"mappings":"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","sourcesContent":["// @flow\n\nimport Button from '@material-ui/core/Button'\nimport FormControl from '@material-ui/core/FormControl'\nimport Input from '@material-ui/core/Input'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport { withStyles } from '@material-ui/core/styles'\nimport React from 'react'\nimport Dropzone from 'react-dropzone'\n\nimport { getUserToken2 } from '../../rb-appbase-webapp/scripts/userToken2'\n\nconst styles = (theme) => ({\n  buttonProperties: {\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1),\n  },\n  dropZone: {\n    backgroundColor: '#a0a0a0',\n    border: '#000000 1px dashed',\n    width: 256,\n    height: 256,\n  },\n  currentImage: {\n    backgroundSize: '100% auto',\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: 'center center',\n    width: 256,\n    height: 256,\n  },\n  dzActive: {\n    border: '#ff0000 1px dashed',\n    backgroundColor: '#800000',\n    opacity: 1,\n  },\n  dzReject: {\n    backgroundColor: '#800000',\n    border: '0px',\n    opacity: 0.5,\n  },\n})\n\nconst reGetFileNameExtension = /(.+?)\\.([^.]*$|$)/\n\nfunction extractFileNameAndExtension(fileNameFull: string) {\n  // $FlowIgnore we will get two items\n  let arrName: Array<string | null> = reGetFileNameExtension.exec(fileNameFull)\n  if (!arrName) {\n    arrName = [ null, fileNameFull, 'jpg' ]\n  }\n\n  // $FlowIgnore\n  const fileNamePrototype: string = arrName[1]\n\n  let fileName = ''\n  let previousNonLetter = true\n  for (let i = 0; i < fileNamePrototype.length; i++) {\n    let char = fileNamePrototype.charAt(i)\n\n    if (char >= 'a' && char <= 'z') {\n      if (previousNonLetter) {\n        char = char.toUpperCase()\n        previousNonLetter = false\n      }\n      fileName += char\n    } else if (char >= 'A' && char <= 'Z') {\n      previousNonLetter = false\n      fileName += char\n    } else if (char >= '0' && char <= '9') {\n      previousNonLetter = true\n      fileName += char\n    } else {\n      previousNonLetter = true\n    }\n  }\n\n  if (!arrName[2]) throw new Error()\n\n  const fileNameExtension = arrName[2].toLowerCase()\n\n  return { fileName, fileNameExtension }\n}\n\nclass ImageManagerUploader extends React.Component<\n  {\n    classes: Object,\n    customizeFileName?: boolean,\n    label: string,\n    parameters: { [string]: string },\n    value: string,\n    onChange: Function,\n  },\n  {\n    fileDropped: ?Object,\n    fileDroppedPreview: ?string,\n    fileName: string,\n    fileNameExtension: string,\n  },\n> {\n  constructor(props: Object, context: Object) {\n    super(props, context)\n\n    this.state = {\n      fileDropped: null,\n      fileDroppedPreview: null,\n      fileName: '',\n      fileNameExtension: '',\n    }\n  }\n\n  componentWillUnmount() {\n    this.releasePreview()\n  }\n\n  releasePreview() {\n    // Make sure to revoke the data uri to avoid memory leaks\n    const { fileDroppedPreview } = this.state\n\n    if (fileDroppedPreview) {\n      URL.revokeObjectURL(fileDroppedPreview)\n    }\n  }\n\n  _handle_onDrop = (filesDropped: Array<Object>) => {\n    if (filesDropped.length < 1) {\n      return\n    } else if (filesDropped.length < 1) {\n      // IDEA [User Experience Quality] Replace alert with Material-UI alert\n      alert('Please choose one image')\n      return\n    } else {\n      const fileDropped = filesDropped[0]\n\n      const fileDroppedPreview = URL.createObjectURL(fileDropped)\n\n      const { fileName, fileNameExtension } = extractFileNameAndExtension(fileDropped.name)\n\n      this.setState({\n        fileDropped,\n        fileDroppedPreview,\n        fileName,\n        fileNameExtension,\n      })\n    }\n  }\n\n  _handle_onChangeFileName = (event: Object) => {\n    this.setState({ fileName: event.target.value })\n  }\n\n  _handle_onClickUpload = () => {\n    const { parameters } = this.props\n    const { fileName, fileNameExtension, fileDropped } = this.state\n\n    if (!fileDropped) return\n\n    const formData = new FormData()\n\n    formData.append('uploadedFile', fileDropped)\n    formData.append('fileName', fileName)\n    formData.append('fileNameExtension', fileNameExtension)\n\n    for (let parameterName in parameters) {\n      formData.append(parameterName, parameters[parameterName])\n    }\n\n    const serverURL = '/rb-image-manager/upload'\n\n    var xhr = new XMLHttpRequest()\n    xhr.open('POST', serverURL)\n    xhr.setRequestHeader('UserToken2', getUserToken2())\n\n    xhr.onreadystatechange = () => {\n      if (xhr.readyState === 4) {\n        if (xhr.status === 200) this._handle_onUploadSuccess(xhr.responseText)\n        else this._handle_onUploadFailure(xhr.responseText)\n      }\n    }\n\n    xhr.send(formData)\n  }\n\n  _handle_onUploadSuccess = (responseText: string) => {\n    try {\n      const fileName = JSON.parse(responseText).fileName\n\n      this.props.onChange(fileName)\n    } catch (err) {\n      alert('Image upload failed')\n    }\n\n    this.releasePreview()\n\n    this.setState({\n      fileDropped: null,\n      fileDroppedPreview: null,\n      fileName: '',\n    })\n  }\n\n  _handle_onUploadFailure = (responseText: string) => {\n    // IDEA [User Experience Quality] Replace alert with Material-UI alert\n    alert('Image upload failed')\n\n    this.releasePreview()\n\n    this.setState({\n      fileDropped: null,\n      fileDroppedPreview: null,\n      fileName: '',\n    })\n  }\n\n  _handle_onClickCalcelUpload = () => {\n    this.releasePreview()\n\n    this.setState({\n      fileDropped: null,\n      fileDroppedPreview: null,\n      fileName: '',\n    })\n  }\n\n  renderFilesDropped() {\n    const { classes, customizeFileName, label } = this.props\n    const { fileName, fileDroppedPreview } = this.state\n\n    return (\n      <div>\n        <FormControl fullWidth={true}>\n          <InputLabel>{label}</InputLabel>\n        </FormControl>\n        <br />\n        <br />\n        <br />\n\n        <div className={classes.dropZone}>\n          <img alt=\"Preview\" className={classes.currentImage} src={fileDroppedPreview} />\n        </div>\n\n        {customizeFileName && <br />}\n        {customizeFileName && (\n          <FormControl fullWidth={true}>\n            <InputLabel>File Name</InputLabel>\n            <Input value={fileName} onChange={this._handle_onChangeFileName} />\n          </FormControl>\n        )}\n\n        <Button className={classes.buttonProperties} onClick={this._handle_onClickUpload}>\n          Upload\n        </Button>\n        <Button className={classes.buttonProperties} onClick={this._handle_onClickCalcelUpload}>\n          Clear\n        </Button>\n\n        <br />\n        <br />\n      </div>\n    )\n  }\n\n  renderFilesNotDropped() {\n    const { classes, label, parameters, value } = this.props\n\n    const backgroundImage =\n      value !== ''\n        ? 'url(/rb-image-manager/download?' +\n          Object.entries(parameters)\n            .map(\n              ([ paramKey: string, paramValue: string ]) =>\n                //$FlowIgnore\n                encodeURIComponent(paramKey) + '=' + encodeURIComponent(paramValue) + '&',\n            )\n            .join('') +\n          'UserToken2=' +\n          getUserToken2() +\n          '&fileName=' +\n          encodeURIComponent(value) +\n          ')'\n        : ''\n\n    console.log({ XXX: backgroundImage })\n\n    return (\n      <div>\n        <FormControl fullWidth={true}>\n          <InputLabel>{label}</InputLabel>\n        </FormControl>\n        <br />\n        <br />\n        <br />\n\n        <Dropzone\n          multiple={false}\n          ref=\"dropzone\"\n          onDrop={this._handle_onDrop}\n          className={classes.dropZone}\n          activeClassName={classes.dzActive}\n          rejectClassName={classes.dzReject}\n        >\n          {({ getRootProps, getInputProps }) => (\n            <div\n              {...getRootProps({\n                className: classes.currentImage,\n                style: {\n                  backgroundImage,\n                },\n              })}\n            >\n              <input {...getInputProps()} />\n              {value !== '' && <p />}\n              {value === '' && (\n                <div style={{ textAlign: 'center' }}>\n                  <br />\n                  <br />Click or drag\n                </div>\n              )}\n            </div>\n          )}\n        </Dropzone>\n\n        <br />\n        <br />\n      </div>\n    )\n  }\n\n  render() {\n    const { fileDropped } = this.state\n\n    return fileDropped ? this.renderFilesDropped() : this.renderFilesNotDropped()\n  }\n}\n\nexport default withStyles(styles)(ImageManagerUploader)\n"],"file":"ImageManagerUploader.js"}