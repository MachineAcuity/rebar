{"version":3,"sources":["../../../../../units/rb-appbase-server/graphql/type/ViewerType.js"],"names":["GraphQLObjectType","name","interfaces","NodeInterface","isTypeOf","object","User","fields","id","User_IsAnonymous","type","GraphQLBoolean","resolve","obj","defaultPersister","uuidEquals","uuidNull","UserToken2","GraphQLString","User_DisplayName","User_PrimaryEmail","User_PrimaryPhone","UserPermissionForObjects","UserPermissionForObjectsConnection","connectionType","args","connectionArgs","UserPermissionForObject_ObjectType","GraphQLNonNull","context","rootValue","ec","objectManager","om","arr","getObjectList_async","UserPermissionForObject","UserPermissionForObjectType","GraphQLID","parent","local_id","uuidFromString","getOneObject_async","_materialized_view","UserQuotaForObjects","UserQuotaForObjectsConnection","UserQuotaForObject","UserQuotaForObjectType","_ViewerFields"],"mappings":"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","sourcesContent":["// @flow\n\nimport {\n  GraphQLBoolean,\n  GraphQLID,\n  GraphQLNonNull,\n  GraphQLString,\n  GraphQLObjectType,\n} from 'graphql'\nimport { connectionArgs, connectionFromArray, fromGlobalId, globalIdField } from 'graphql-relay'\n\nimport defaultPersister from '../../../_configuration/rb-base-server/graphql/defaultPersister'\nimport NodeInterface from '../NodeInterface'\nimport ObjectManager from '../../../rb-base-server/ObjectManager'\nimport _ViewerFields from '../../../_configuration/rb-base-server/graphql/_ViewerFields'\nimport User from '../model/User'\n\nimport UserPermissionForObjectsConnection from './UserPermissionForObjectsConnection'\nimport UserPermissionForObjectType from './UserPermissionForObjectType'\nimport UserQuotaForObjectsConnection from './UserQuotaForObjectsConnection'\nimport UserQuotaForObjectType from './UserQuotaForObjectType'\n\n//\n\nexport default new GraphQLObjectType({\n  name: 'Viewer',\n  interfaces: [ NodeInterface ],\n  isTypeOf: (object) => object instanceof User,\n  fields: {\n    id: globalIdField('Viewer'),\n    User_IsAnonymous: {\n      type: GraphQLBoolean,\n      resolve: (obj) => defaultPersister.uuidEquals(obj.id, defaultPersister.uuidNull()),\n    },\n    UserToken2: { type: GraphQLString, resolve: (obj) => obj.UserToken2 },\n    User_DisplayName: {\n      type: GraphQLString,\n      resolve: (obj) => obj.User_DisplayName,\n    },\n    User_PrimaryEmail: {\n      type: GraphQLString,\n      resolve: (obj) => obj.User_PrimaryEmail,\n    },\n    User_PrimaryPhone: {\n      type: GraphQLString,\n      resolve: (obj) => obj.User_PrimaryPhone,\n    },\n\n    UserPermissionForObjects: {\n      type: UserPermissionForObjectsConnection.connectionType,\n\n      args: {\n        ...connectionArgs,\n        UserPermissionForObject_ObjectType: {\n          type: new GraphQLNonNull(GraphQLString),\n        },\n      },\n\n      resolve: async (obj, { ...args }, context, { rootValue: ec }) => {\n        const objectManager: ObjectManager = ec.om()\n        const { UserPermissionForObject_ObjectType } = args\n        const arr = await objectManager.getObjectList_async('UserPermissionForObject', {\n          UserPermissionForObject_ObjectType,\n        })\n        return connectionFromArray(arr, args)\n      },\n    },\n\n    UserPermissionForObject: {\n      type: UserPermissionForObjectType,\n\n      args: { ...{ id: { type: GraphQLID } } },\n\n      resolve: async (parent, { id }, context, { rootValue: ec }) => {\n        const objectManager: ObjectManager = ec.om()\n        const local_id = objectManager.uuidFromString(\n          'UserPermissionForObject',\n          fromGlobalId(id).id,\n        )\n\n        // IDEA [Project E] Materialized view UserPermissionForObject_by_ID does not exist\n        return await objectManager.getOneObject_async('UserPermissionForObject', {\n          id: local_id,\n          _materialized_view: 'UserPermissionForObject_by_ID',\n        })\n      },\n    },\n\n    UserQuotaForObjects: {\n      type: UserQuotaForObjectsConnection.connectionType,\n\n      args: { ...connectionArgs },\n\n      resolve: async (obj, { ...args }, context, { rootValue: ec }) => {\n        const objectManager: ObjectManager = ec.om()\n        const arr = await objectManager.getObjectList_async('UserQuotaForObject', {})\n        return connectionFromArray(arr, args)\n      },\n    },\n\n    UserQuotaForObject: {\n      type: UserQuotaForObjectType,\n\n      args: { ...{ id: { type: GraphQLID } } },\n\n      resolve: async (parent, { id }, context, { rootValue: ec }) => {\n        const objectManager: ObjectManager = ec.om()\n        const local_id = objectManager.uuidFromString('UserQuotaForObject', fromGlobalId(id).id)\n\n        return await objectManager.getOneObject_async('UserQuotaForObject', {\n          id: local_id,\n\n          // IDEA [Project E] Materialized view UserQuotaForObject_by_ID does not exist\n          _materialized_view: 'UserQuotaForObject_by_ID',\n        })\n      },\n    },\n\n    ..._ViewerFields,\n  },\n})\n"],"file":"ViewerType.js"}